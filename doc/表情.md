# 一、表格说明

- **类别**：便于分组（表情、符号、旗帜等）
- **Unicode 码点**：单个或多个码点
- **示例**：常用可显示的 Emoji
- **说明**：含义/用途
- **备注**：在 Android 中输入/显示的注意事项

------

# 二、常用 Unicode Emoji 表

| 类别        | Unicode 码点                    | 示例     | 描述                   | 备注                               |
| ----------- | ------------------------------- | -------- | ---------------------- | ---------------------------------- |
| 笑脸 / 情绪 | U+1F600–U+1F64F                 | 😀 😂 😍 😭  | 表情符号、面部表情     | 单个 Unicode 码点或 surrogate pair |
| 人物 / 手势 | U+1F466–U+1F4AA                 | 👋 👍 🙏 💪  | 手势、动作、人物       | 一些有肤色修饰符 (U+1F3FB~U+1F3FF) |
| 服饰 / 配件 | U+1F451–U+1F3FF                 | 👑 🎩 👒    | 头饰、配件             | 可组合 Emoji                       |
| 动物 / 自然 | U+1F400–U+1F43E                 | 🐶 🐱 🐼 🌸  | 动物、植物             |                                    |
| 食物 / 饮料 | U+1F34F–U+1F37F                 | 🍎 🍔 🍣 ☕  | 食物、饮品             |                                    |
| 旅行 / 地点 | U+1F680–U+1F6FF                 | ✈️ 🗽 🏖️    | 交通、地标             | 包括交通工具、景点                 |
| 活动 / 体育 | U+26F0–U+26FF / U+1F3C0–U+1F3C8 | ⚽ 🏀 🎾 🏆  | 体育、活动             |                                    |
| 物体 / 技术 | U+1F4A0–U+1F4FF                 | 📱 💻 🖨️ 🔧  | 日常物品、电子产品     |                                    |
| 符号 / 标志 | U+2700–U+27BF                   | ✨ ✅ ❌ ⚠️  | 标记、符号、警告       |                                    |
| 旗帜        | U+1F1E6–U+1F1FF                 | 🇺🇸 🇨🇳 🇯🇵 | 国家/地区旗帜          | 由两个区域码组合成一个 Emoji       |
| 复合 / 组合 | 多码点组合                      | 🏳️‍🌈 👩‍👩‍👦   | 家庭、性别组合、彩虹旗 | 使用 ZWJ（零宽连接符 U+200D）      |

------

# 三、Android / EditText 使用注意

1. **占字符数**
   - 使用 `String.codePointCount()` 计算长度，避免一个 Emoji 被当作两个 char
   - 组合 Emoji / 旗帜会算作多个码点，但一般按一个“视觉单位”算长度
2. **键盘输入**
   - 系统软键盘支持常见 Emoji
   - 第三方输入法支持更多自定义 Emoji
3. **粘贴**
   - `onReceiveContent()` 需接收 `text/plain` 或 `text/html`
4. **存储**
   - 建议原样存储 Unicode 字符串，不要转换为图片

------

# 四、常用 Unicode 码点范围（快速参考）

| 范围            | 描述                         |
| --------------- | ---------------------------- |
| U+1F300–U+1F5FF | 天气、自然、符号             |
| U+1F600–U+1F64F | 笑脸、情绪                   |
| U+1F680–U+1F6FF | 交通工具、地图               |
| U+1F700–U+1F77F | 魔法、象形符号               |
| U+1F780–U+1F7FF | 方块、几何符号               |
| U+1F800–U+1F8FF | 补充箭头、符号               |
| U+1F900–U+1F9FF | 补充表情（手势、动物、物品） |
| U+1FA00–U+1FA6F | 新增 Emoji（2020+）          |

------





常见做法：在消息内容里用 **占位标记** 来表示自定义表情 / 贴纸，而不是直接存储图片本身。下面详细说明：

------

# 一、占位符标记方式

- **形式**：`[:id]` 或 `[sticker_15]`
- **作用**：
  1. 消息存储时节省空间，只存 `id` 或占位符
  2. 发送端和接收端可以解析标记，渲染对应图片

**示例**：

| 原始消息文本       | 渲染后                               |
| ------------------ | ------------------------------------ |
| "今天心情好 [:15]" | 显示文字 + 对应表情图标（ImageSpan） |
| "你好 [:23] [:42]" | 两个自定义贴纸 + 文字                |

------

# 二、消息发送 & 渲染流程

1. **编辑时**
   - 用户点击面板 → 插入 ImageSpan
   - 内部 TextView/Spannable 显示图片，但 `Spannable` 中可以附加标识（tag / span对象）
2. **发送前转换**
   - 将 `Spannable` 中的 ImageSpan 替换为占位符文本，比如 `[:15]`
   - 发送到服务器的消息就是纯文本（含占位符）
3. **接收时渲染**
   - 解析消息文本
   - 检测 `[:id]` 占位符
   - 用对应的 ImageSpan / Drawable 替换占位符显示

------

# 三、实现要点

1. **TextView / EditText 插入占位符**
   - 可以用一个特殊不可见字符占位，如 `\uFFFC`
   - ImageSpan 替换显示
   - 光标移动、删除都可以正确操作
2. **占位符存储**
   - 消息内容保存为纯文本 → `[text][:15][text]`
   - 方便存储、检索、转发、搜索
3. **渲染逻辑**
   - 解析文本 → 找到 `[:id]` → 替换为 ImageSpan
   - GIF 或动图可用支持动画的 Drawable

------

# 四、优点

- **节省带宽 & 存储**：不直接发送图片
- **统一渲染**：客户端可自定义大小、动画
- **兼容性好**：只要占位符不冲突，任何消息系统都能存文本

------

# 五、示例 Kotlin 渲染方法

```
fun parseCustomEmojis(text: String, context: Context): SpannableString {
    val spannable = SpannableString(text)
    val regex = "\\[:(\\d+)]".toRegex()
    regex.findAll(text).forEach { match ->
        val id = match.groupValues[1].toInt()
        val drawable = getStickerDrawableById(context, id)
        drawable.setBounds(0, 0, 60, 60)
        val span = ImageSpan(drawable, ImageSpan.ALIGN_BOTTOM)
        spannable.setSpan(span, match.range.first, match.range.last + 1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE)
    }
    return spannable
}
```

- `getStickerDrawableById()` → 返回对应图片资源
- 占位符 `[:id]` 会被替换为 ImageSpan

------

总结：

> 小红书、微信、QQ 等 IM 系统都是这种思路：
>
> - 输入框显示图片（ImageSpan）
> - 消息存储占位符（[:id]）
> - 渲染时再把占位符替换成对应图片

------

# **六**、典型字符示例（按编码顺序）

| 编码    | 字符 | 含义         | 编码    | 字符 | 含义     |
| ------- | ---- | ------------ | ------- | ---- | -------- |
| U+1F600 | 😀    | 咧嘴笑       | U+1F610 | 😐    | 中性表情 |
| U+1F601 | 😁    | 咧嘴笑带眼睛 | U+1F611 | 😑    | 面无表情 |
| U+1F602 | 😂    | 笑哭         | U+1F612 | 😒    | 不屑     |
| U+1F603 | 😃    | 大笑         | U+1F613 | 😓    | 无奈     |
| U+1F604 | 😄    | 微笑带眼睛   | U+1F614 | 😔    | 难过     |
| U+1F605 | 😅    | 尴尬笑       | U+1F615 | 😕    | 困惑     |
| U+1F606 | 😆    | 大笑         | U+1F616 | 😖    | 困扰     |
| U+1F607 | 😇    | 天使笑       | U+1F617 | 😗    | 吻       |
| U+1F608 | 😈    | 小恶魔       | U+1F618 | 😘    | 飞吻     |
| U+1F609 | 😉    | 眨眼         | U+1F619 | 😙    | 亲亲     |
| U+1F60A | 😊    | 害羞笑       | U+1F61A | 😚    | 嘟嘴亲亲 |
| U+1F60B | 😋    | 馋嘴         | U+1F61B | 😛    | 吐舌     |
| U+1F60C | 😌    | 放松         | U+1F61C | 😜    | 眨眼吐舌 |
| U+1F60D | 😍    | 花痴         | U+1F61D | 😝    | 吐舌笑   |
| U+1F60E | 😎    | 戴墨镜       | U+1F61E | 😞    | 失望     |
| U+1F60F | 😏    | 得意         | U+1F61F | 😟    | 担忧     |
| ...     | ...  | ...          | U+1F64F | 🙏    | 双手合十 |